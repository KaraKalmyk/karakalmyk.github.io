/* Базовая стилизация (минимальная). Дополните позже. */
:root {
  --bg: #ffffff;
  --fg: #222222;
  --accent: #8b3dff;
  --accent-hover: #6e19f0;
  --border: #e0e0e0;
  --font-stack: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
  --font-display: 'Space Grotesk', system-ui, sans-serif;
  --font-body: 'Inter', system-ui, sans-serif;
  --accent-alt: #ffb347;
  --accent-grad: linear-gradient(135deg,#8b3dff 0%,#cf61ff 55%,#ffb347 100%);
  --bg-alt: #f4f4f7;
  --radius: 18px;
  --shadow-sm: 0 2px 4px -2px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.08);
  --shadow-md: 0 4px 18px -4px rgba(0,0,0,.18),0 2px 6px -2px rgba(0,0,0,.12);
  --grad-bg: radial-gradient(circle at 30% 20%,#ece5ff 0%,#fafafa 55%,#ffffff 100%);
}
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #121212;
    --fg: #e4e4e4;
    --border: #2a2a2a;
  }
  html[data-theme="dark"] {
    --bg: #0f1013;
    --bg-alt: #17181d;
    --fg: #e8e9ec;
    --border: #2b2d33;
    --grad-bg: radial-gradient(circle at 25% 15%,#231a36 0%,#14151a 55%,#101115 100%);
    --accent: #b58bff;
    --accent-hover: #d2b3ff;
    --accent-alt: #ffc97d;
    --shadow-sm: 0 2px 4px -2px rgba(0,0,0,.6),0 1px 2px rgba(0,0,0,.5);
    --shadow-md: 0 8px 28px -6px rgba(0,0,0,.7),0 4px 12px -2px rgba(0,0,0,.55);
  }
}
/* ===== Modern Serious Theme Overrides (2025 refinement) ===== */
:root {
  --color-bg: #f5f7fa;
  --color-bg-soft: #eef1f5;
  --color-surface: #ffffff;
  --color-border: #d9dee4;
  --color-text: #1d232b;
  --color-text-soft: #4c5562;
  --color-accent: #305ae6;
  --color-accent-alt: #193266;
  --color-accent-soft: #e3ecff;
  --color-danger: #b02a37;
  --color-focus: #1c5ed6;
  --radius-sm: 4px;
  --radius-md: 10px;
  --radius-lg: 18px;
  --shadow-1: 0 1px 2px rgba(0,0,0,.06),0 1px 3px rgba(0,0,0,.08);
  --shadow-2: 0 4px 10px -2px rgba(0,0,0,.08),0 2px 4px -1px rgba(0,0,0,.06);
  --transition-base: .28s cubic-bezier(.4,.2,.2,1);
}
html[data-theme="dark"] {
  --color-bg: #121417;
  --color-bg-soft: #181b20;
  --color-surface: #1e2227;
  --color-border: #30353d;
  --color-text: #e3e6ea;
  --color-text-soft: #a4acb8;
  --color-accent: #5b8dff;
  --color-accent-alt: #d2e2ff;
  --color-accent-soft: #182640;
  --color-focus: #5b8dff;
  --shadow-1: 0 1px 2px rgba(0,0,0,.65),0 1px 3px rgba(0,0,0,.55);
  --shadow-2: 0 6px 18px -4px rgba(0,0,0,.7),0 3px 8px -3px rgba(0,0,0,.6);
}
html { box-sizing: border-box; }
*,*::before,*::after { box-sizing: inherit; }
body { margin:0; font-family: var(--font-stack); background: var(--bg); color: var(--fg); line-height: 1.55; }
a { color: var(--accent); text-decoration: none; }
a:hover,a:focus { color: var(--accent-hover); text-decoration: underline; }
.wrap { max-width: 980px; margin: 0 auto; padding: 0 1.1rem; }
.site-header { background: linear-gradient(90deg,#321851,#4e2783); color:#fff; }
.site-header.modern { backdrop-filter: blur(14px) saturate(150%); background: rgba(255,255,255,.55); border-bottom: 1px solid rgba(255,255,255,.4); position: sticky; top:0; z-index:40; }
html[data-theme="dark"] .site-header.modern { background: rgba(20,20,24,.55); border-color: rgba(255,255,255,.07); }
.site-header .wrap { display:flex; flex-wrap:wrap; align-items:center; justify-content: space-between; }
.site-title { font-size:1.1rem; font-weight:600; padding:0.8rem 0; color:#fff; }
.brand .site-title { font-family: var(--font-display); font-weight:600; letter-spacing:.5px; font-size:1.05rem; background: var(--accent-grad); -webkit-background-clip:text; color:transparent; }
.site-nav ul { list-style:none; margin:0; padding:0; display:flex; flex-wrap:wrap; gap:.75rem; }
.site-nav a { position:relative; padding:.65rem 1rem; font-weight:500; font-size:.95rem; text-transform:uppercase; letter-spacing:.04em; color: var(--fg); opacity:.78; transition:.25s; }
.site-nav a:hover,.site-nav a[aria-current="page"] { opacity:1; }
.site-nav a[aria-current="page"]::after { content:""; position:absolute; left:10px; right:10px; bottom:6px; height:2px; background: var(--accent-grad); border-radius:2px; }
.mode-toggle { background: var(--bg-alt); border:1px solid var(--border); border-radius: 50%; width:40px; height:40px; cursor:pointer; font-size:1rem; display:grid; place-items:center; color: var(--fg); box-shadow: var(--shadow-sm); transition:.35s; }
.mode-toggle:hover { transform: rotate(18deg); background: var(--accent); color:#fff; border-color: var(--accent); }
html[data-theme="dark"] .mode-toggle:hover { color:#101010; }
.site-content { padding: clamp(1.2rem,2.5vw,2rem) 0 clamp(3rem,5vw,4.5rem); }
.site-content h1,h2,h3 { line-height:1.25; }
.site-content h1 { font-size:2rem; margin-top:0; }
.site-content h2 { margin-top:2.2rem; font-size:1.4rem; }
.site-content h3 { margin-top:1.6rem; font-size:1.15rem; }
blockquote { margin:1.2rem 0; padding:.6rem 1rem; border-left:4px solid var(--accent); background: linear-gradient(90deg,rgba(139,61,255,.08),rgba(139,61,255,.02)); }
blockquote { border-left:6px solid transparent; background: linear-gradient(100deg,rgba(139,61,255,.12),rgba(255,179,71,.12)); border-radius: 0 14px 14px 0; }
pre,code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.9rem; }
pre { background:#27282f; color:#f1f3f6; padding:.9rem 1rem; border-radius:6px; overflow:auto; }
code { background: rgba(0,0,0,.06); padding:2px 4px; border-radius:4px; }
@media (prefers-color-scheme: dark) { code { background: rgba(255,255,255,.09); } }
table { border-collapse: collapse; width:100%; margin:1rem 0; font-size:.92rem; }
table { border:1px solid var(--border); border-radius:14px; overflow:hidden; background: var(--bg-alt); box-shadow: var(--shadow-sm); }
th,td { border-color: var(--border); }
th { font-size:.68rem; letter-spacing:.08em; text-transform:uppercase; font-weight:600; }
th { background:#fafafa; }
@media (prefers-color-scheme: dark) { th { background:#1e1e25; } }

/* Карты */
#map { width:100%; height:480px; margin:1rem 0 2rem; border:1px solid var(--border); border-radius:6px; }

/* Галерея (позже) */
.gallery-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(170px,1fr)); gap: .9rem; }
.gallery-grid { gap:1.1rem; }
.gallery-grid figure { position:relative; overflow:hidden; border-radius:16px; background: #000; aspect-ratio: 4/3; display:flex; flex-direction:column; }
.gallery-grid img { flex:1; width:100%; height:100%; object-fit:cover; border-radius:0; box-shadow:none; filter: saturate(1.05) contrast(1.02); transition:.6s; }
.gallery-grid figure:hover img { transform: scale(1.06); }
.gallery-grid figcaption { position:absolute; inset:auto 0 0 0; padding:.55rem .65rem .65rem; background: linear-gradient(180deg,rgba(0,0,0,0),rgba(0,0,0,.65)); color:#fff; font-size:.62rem; letter-spacing:.05em; text-shadow:0 1px 2px rgba(0,0,0,.55); }
.gallery-grid figure.img-error {
  border: 2px solid #d22 !important;
  background: #fff0f0 !important;
}
.gallery-grid figure.img-error img {
  opacity: 0.5 !important;
}

/* Утилиты */
.muted { opacity:.65; }
.flex { display:flex; }
.gap-s { gap:.5rem; }

/* Принтер */
@media print { .site-header, .site-footer, nav { display:none !important; } body { background:#fff; color:#000; } }

/* Animations */
@keyframes fadeSlide { from { opacity:0; transform: translateY(14px);} to { opacity:1; transform: translateY(0);} }
.hero, .cards-grid .card, .gallery-grid figure { animation: fadeSlide .9s cubic-bezier(.6,.2,.25,1) both; }
.cards-grid .card { animation-delay: calc(var(--i) * 60ms); }

/* Scrollbar (WebKit) */
::-webkit-scrollbar { width:10px; height:10px; }
::-webkit-scrollbar-track { background: var(--bg-alt); }
::-webkit-scrollbar-thumb { background: linear-gradient(var(--accent),var(--accent-alt)); border-radius:100px; }
html[data-theme="dark"] ::-webkit-scrollbar-track { background:#1d1f24; }
html[data-theme="dark"] ::-webkit-scrollbar-thumb { background: linear-gradient(#5f3fa6,#b58bff); }

/* Selection */
::selection { background: var(--accent); color:#fff; }
html[data-theme="dark"] ::selection { background: #b58bff; color:#101010; }

/* Accessibility focus */
:focus-visible { outline:2px solid var(--accent-alt); outline-offset:3px; }
html[data-theme="dark"] :focus-visible { outline-color: var(--accent); }

/* ===== Modern Serious Theme Overrides (2025 refinement) ===== */
:root {
  --color-bg: #f5f7fa;
  --color-bg-soft: #eef1f5;
  --color-surface: #ffffff;
  --color-border: #d9dee4;
  --color-text: #1d232b;
  --color-text-soft: #4c5562;
  --color-accent: #305ae6;
  --color-accent-alt: #193266;
  --color-accent-soft: #e3ecff;
  --color-danger: #b02a37;
  --color-focus: #1c5ed6;
  --radius-sm: 4px;
  --radius-md: 10px;
  --radius-lg: 18px;
  --shadow-1: 0 1px 2px rgba(0,0,0,.06),0 1px 3px rgba(0,0,0,.08);
  --shadow-2: 0 4px 10px -2px rgba(0,0,0,.08),0 2px 4px -1px rgba(0,0,0,.06);
  --transition-base: .28s cubic-bezier(.4,.2,.2,1);
}
html[data-theme="dark"] {
  --color-bg: #121417;
  --color-bg-soft: #181b20;
  --color-surface: #1e2227;
  --color-border: #30353d;
  --color-text: #e3e6ea;
  --color-text-soft: #a4acb8;
  --color-accent: #5b8dff;
  --color-accent-alt: #d2e2ff;
  --color-accent-soft: #182640;
  --color-focus: #5b8dff;
  --shadow-1: 0 1px 2px rgba(0,0,0,.65),0 1px 3px rgba(0,0,0,.55);
  --shadow-2: 0 6px 18px -4px rgba(0,0,0,.7),0 3px 8px -3px rgba(0,0,0,.6);
}
body { background: var(--color-bg); color: var(--color-text); font-family: var(--font-body); }
.site-header.modern { background: rgba(255,255,255,.82); backdrop-filter: blur(12px); border-bottom:1px solid var(--color-border); }
html[data-theme="dark"] .site-header.modern { background: rgba(26,29,34,.82); }
.brand .site-title { background: none; color: var(--color-text); letter-spacing:.5px; }
html[data-theme="dark"] .brand .site-title { color: var(--color-text); }
.site-nav a { color: var(--color-text-soft); font-weight:500; }
.site-nav a:hover,.site-nav a[aria-current="page"] { color: var(--color-text); }
.site-nav a[aria-current="page"]::after { background: var(--color-accent); height: 3px; bottom: 4px; }
.mode-toggle { background: var(--color-bg-soft); border:1px solid var(--color-border); color: var(--color-text-soft); }
.mode-toggle:hover { background: var(--color-accent); color:#fff; border-color: var(--color-accent); transform:none; }
html[data-theme="dark"] .mode-toggle { background:#22272d; }

/* Hero refined */
.hero { margin: 2.2rem 0 2.8rem; }
.hero::before { display:none; }
.hero-title { background:none; color: var(--color-text); font-weight:600; font-size: clamp(2.2rem,5.2vw,3.6rem); line-height:1.08; }
html[data-theme="dark"] .hero-title { color: var(--color-text); }
.hero-title { position:relative; }
.hero-title:after { content:""; position:absolute; left:0; bottom:-14px; width:92px; height:5px; background: var(--color-accent); border-radius:3px; }
.hero-tagline { color: var(--color-text-soft); font-size: clamp(1rem,1.15vw,1.18rem); }
.hero-actions .btn { box-shadow: var(--shadow-1); font-weight:500; }
.btn.primary { background: var(--color-accent); border:1px solid var(--color-accent); color:#fff; }
.btn.primary:hover { background:#2149c5; }
.btn { background: var(--color-surface); border:1px solid var(--color-border); color: var(--color-text-soft); }
.btn:hover { border-color: var(--color-accent); color: var(--color-accent); }
html[data-theme="dark"] .btn { background:#22272d; border-color:#30363d; }
html[data-theme="dark"] .btn:hover { color: var(--color-accent-alt); }

/* Cards minimal */
.card { background: var(--color-surface); border:1px solid var(--color-border); box-shadow: var(--shadow-1); backdrop-filter:none; }
html[data-theme="dark"] .card { background:#1f2429; border-color:#30363d; }
.card:hover { transform: translateY(-4px); box-shadow: var(--shadow-2); }
.card h3 { font-weight:600; letter-spacing:0; }
.card p { color: var(--color-text-soft); }
.card span.tag { background: var(--color-accent-soft); color: var(--color-accent); border-radius: var(--radius-sm); font-weight:600; }
html[data-theme="dark"] .card span.tag { background:#22344d; color: var(--color-accent-alt); }

/* Gallery neutral */
.gallery-grid figure { background: var(--color-bg-soft); border:1px solid var(--color-border); }
html[data-theme="dark"] .gallery-grid figure { background:#1f2429; border-color:#30363d; }
.gallery-grid figcaption { background: linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.55) 88%); font-size:.65rem; }

/* Tables (serious look) */
#vocab-table { font-size:.85rem; border:1px solid var(--color-border); border-collapse: separate; border-spacing:0; background: var(--color-surface); }
#vocab-table thead th { background: var(--color-bg-soft); border-bottom:1px solid var(--color-border); padding:.55rem .7rem; font-weight:600; font-size:.65rem; letter-spacing:.05em; color: var(--color-text-soft); }
html[data-theme="dark"] #vocab-table thead th { background:#22272d; color:#a8b2bf; }
#vocab-table tbody td { padding:.55rem .7rem; border-top:1px solid var(--color-border); }
#vocab-table tbody tr:hover { background: var(--color-accent-soft); }
html[data-theme="dark"] #vocab-table tbody tr:hover { background:#1e2d45; }
#vocab-filter { border:1px solid var(--color-border); background: var(--color-surface); color: var(--color-text); box-shadow: var(--shadow-1); }
html[data-theme="dark"] #vocab-filter { background:#1f2429; border-color:#30363d; }

/* Blockquote */
blockquote { background: var(--color-bg-soft); border-left:4px solid var(--color-accent); padding: .7rem 1rem .7rem 1rem; }
html[data-theme="dark"] blockquote { background:#1e2328; }

/* Footer */
.site-footer.modern { background: var(--color-bg-soft); border-top:1px solid var(--color-border); }
html[data-theme="dark"] .site-footer.modern { background:#181b20; }
.site-footer.modern p { color: var(--color-text-soft); }

/* Responsive nav */
@media (max-width: 880px) {
  .site-nav ul { display:none; }
  .site-nav ul.open { display:flex; position:absolute; top:60px; right:1rem; flex-direction:column; background: var(--color-surface); padding: .75rem .9rem; border:1px solid var(--color-border); border-radius: var(--radius-md); box-shadow: var(--shadow-2); min-width: 190px; }
  html[data-theme="dark"] .site-nav ul.open { background:#1f2429; }
  .hamburger { display:inline-flex; }
}
.hamburger { display:none; background: var(--color-bg-soft); border:1px solid var(--color-border); width:44px; height:44px; border-radius:8px; align-items:center; justify-content:center; cursor:pointer; transition: var(--transition-base); }
.hamburger:hover { background: var(--color-surface); }
.hamburger span { width:20px; height:2px; background: var(--color-text); position:relative; display:block; }
.hamburger span::before, .hamburger span::after { content:""; position:absolute; left:0; width:20px; height:2px; background: var(--color-text); transition: var(--transition-base); }
.hamburger span::before { top:-6px; }
.hamburger span::after { top:6px; }
.hamburger.active span { background:transparent; }
.hamburger.active span::before { transform: translateY(6px) rotate(45deg); }
.hamburger.active span::after { transform: translateY(-6px) rotate(-45deg); }

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Focus ring */
:focus-visible { outline:2px solid var(--color-focus); outline-offset:3px; }

/* Utility spacing adjustments */
.section-cards { margin-top: 1rem; }

/* === Overrides: Active nav pill + Solid header (request points 2 & 4) === */
.site-header.modern {
  background: var(--color-surface) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border-bottom: 1px solid var(--color-border) !important;
}
html[data-theme="dark"] .site-header.modern {
  background: #1e2227 !important;
}
/* Base nav link tweak (slightly tighter letter-spacing for serious look) */
.site-nav a {
  letter-spacing: .03em !important;
  border-radius: 999px; /* so hover already has shape */
  transition: background-color .25s ease, color .25s ease;
}
/* Hover state (non-active) */
.site-nav a:hover:not([aria-current]) {
  background: var(--color-accent-soft);
  color: var(--color-accent);
}
html[data-theme="dark"] .site-nav a:hover:not([aria-current]) {
  background: #22344d;
  color: var(--color-accent-alt);
}
/* Active pill */
.site-nav a[aria-current="page"] {
  background: var(--color-accent) !important;
  color: #fff !important;
  box-shadow: var(--shadow-1);
  opacity: 1 !important;
}
html[data-theme="dark"] .site-nav a[aria-current="page"] {
  background: #3d6edc !important;
}
/* Remove underline bar pseudo-element */
.site-nav a[aria-current="page"]::after { display:none !important; }
/* Mobile open menu uses same pills naturally */
@media (max-width:880px){
  .site-nav ul.open a { padding:.7rem 1rem; }
}
/* === End overrides === */
