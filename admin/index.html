<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | –°–∞—Ä—Ç-–∫–∞–ª–º—ã–∫–∏</title>
  <!-- Netlify Identity Widget for authentication -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <style>
    :root {
      --bg-primary: #ffffff;
      --bg-secondary: #f7f7f7;
      --text-primary: #000000;
      --text-secondary: #525252;
      --border-color: #d4d4d4;
      --accent: #2563eb;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-secondary);
      min-height: 100vh;
    }
    
    .admin-header {
      background: var(--text-primary);
      color: var(--bg-primary);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .admin-header h1 {
      font-size: 1.25rem;
      font-weight: 600;
    }
    
    .admin-header a {
      color: var(--bg-primary);
      text-decoration: none;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    
    .admin-header a:hover { opacity: 1; }
    
    .admin-tabs {
      display: flex;
      background: var(--bg-primary);
      border-bottom: 1px solid var(--border-color);
      padding: 0 2rem;
    }
    
    .admin-tab {
      padding: 1rem 1.5rem;
      border: none;
      background: none;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text-secondary);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }
    
    .admin-tab:hover { color: var(--text-primary); }
    
    .admin-tab.active {
      color: var(--text-primary);
      border-bottom-color: var(--text-primary);
    }
    
    .admin-content {
      display: none;
      padding: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .admin-content.active { display: block; }
    
    .info-box {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 2rem;
      margin-bottom: 2rem;
    }
    
    .info-box h2 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .info-box p {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
    }
    
    .info-box ul {
      list-style: disc;
      padding-left: 1.5rem;
      color: var(--text-secondary);
      line-height: 1.8;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: var(--text-primary);
      color: var(--bg-primary);
      border: none;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      border-radius: 4px;
      transition: opacity 0.2s;
    }
    
    .btn:hover { opacity: 0.8; }
    
    .btn-secondary {
      background: transparent;
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }
    
    .btn-secondary:hover {
      background: var(--bg-secondary);
      opacity: 1;
    }
    
    .editor-container {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    
    .editor-toolbar {
      display: flex;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      flex-wrap: wrap;
    }
    
    .toolbar-btn {
      padding: 0.5rem 0.75rem;
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 4px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .toolbar-btn:hover {
      background: var(--text-primary);
      color: var(--bg-primary);
    }
    
    .editor-fields {
      padding: 1.5rem;
      display: grid;
      gap: 1rem;
    }
    
    .field-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .field-group label {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-secondary);
    }
    
    .field-group input,
    .field-group select {
      padding: 0.75rem;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      font-size: 0.95rem;
      font-family: inherit;
    }
    
    .field-group input:focus,
    .field-group select:focus,
    .editor-textarea:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .editor-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0;
      border-top: 1px solid var(--border-color);
    }
    
    @media (max-width: 1024px) {
      .editor-main {
        grid-template-columns: 1fr;
      }
    }
    
    .editor-textarea-container {
      border-right: 1px solid var(--border-color);
    }
    
    .editor-label {
      padding: 0.75rem 1rem;
      background: var(--bg-secondary);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-secondary);
    }
    
    .editor-textarea {
      width: 100%;
      min-height: 500px;
      padding: 1.5rem;
      border: none;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 0.9rem;
      line-height: 1.6;
      resize: vertical;
    }
    
    .preview-container {
      background: var(--bg-primary);
    }
    
    .preview-content {
      padding: 1.5rem;
      min-height: 500px;
      line-height: 1.7;
    }
    
    .preview-content h1 { font-size: 2rem; margin: 0 0 1rem; }
    .preview-content h2 { font-size: 1.5rem; margin: 1.5rem 0 0.75rem; }
    .preview-content h3 { font-size: 1.25rem; margin: 1.25rem 0 0.5rem; }
    .preview-content p { margin-bottom: 1rem; color: var(--text-secondary); }
    .preview-content ul, .preview-content ol { margin: 1rem 0; padding-left: 1.5rem; }
    .preview-content li { margin-bottom: 0.5rem; color: var(--text-secondary); }
    .preview-content ul li { list-style: disc; }
    .preview-content ol li { list-style: decimal; }
    .preview-content blockquote {
      margin: 1rem 0;
      padding: 1rem;
      border-left: 4px solid var(--text-primary);
      background: var(--bg-secondary);
      font-style: italic;
    }
    .preview-content code {
      background: var(--bg-secondary);
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 0.85em;
    }
    .preview-content pre {
      background: var(--bg-secondary);
      padding: 1rem;
      border-radius: 4px;
      overflow-x: auto;
      margin: 1rem 0;
    }
    .preview-content pre code {
      background: none;
      padding: 0;
    }
    .preview-content img {
      max-width: 100%;
      margin: 1rem 0;
    }
    .preview-content a {
      color: var(--accent);
      text-decoration: underline;
    }
    .preview-content strong { font-weight: 600; color: var(--text-primary); }
    .preview-content em { font-style: italic; }
    
    .editor-actions {
      display: flex;
      gap: 1rem;
      padding: 1rem 1.5rem;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-color);
    }
    
    .file-list {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    
    .file-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
    }
    
    .file-list-header h3 {
      font-size: 1rem;
    }
    
    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--border-color);
      transition: background 0.2s;
      cursor: pointer;
    }
    
    .file-item:hover {
      background: var(--bg-secondary);
    }
    
    .file-item:last-child {
      border-bottom: none;
    }
    
    .file-info h4 {
      font-size: 0.95rem;
      margin-bottom: 0.25rem;
    }
    
    .file-info p {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .file-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .notice {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 8px;
      padding: 1rem 1.5rem;
      margin-bottom: 2rem;
    }
    
    .notice-title {
      font-weight: 600;
      color: #92400e;
      margin-bottom: 0.5rem;
    }
    
    .notice p {
      color: #78350f;
      font-size: 0.9rem;
    }
    
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    
    @media (max-width: 768px) {
      .grid-2 { grid-template-columns: 1fr; }
      .admin-tabs { overflow-x: auto; }
      .editor-actions { flex-wrap: wrap; }
    }
  </style>
</head>
<body>
  <header class="admin-header">
    <h1>‚öô –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
    <a href="/">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç</a>
  </header>
  
  <nav class="admin-tabs">
    <button class="admin-tab active" data-tab="overview">–û–±–∑–æ—Ä</button>
    <button class="admin-tab" data-tab="editor">–†–µ–¥–∞–∫—Ç–æ—Ä</button>
    <button class="admin-tab" data-tab="pages">–°—Ç—Ä–∞–Ω–∏—Ü—ã</button>
    <button class="admin-tab" data-tab="posts">–ë–ª–æ–≥</button>
    <button class="admin-tab" data-tab="cms">Decap CMS</button>
  </nav>
  
  <!-- Overview Tab -->
  <div class="admin-content active" id="tab-overview">
    <div class="info-box">
      <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
      <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∞–π—Ç–∞. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è —Ä–∞–±–æ—Ç—ã:</p>
      <ul>
        <li><strong>–†–µ–¥–∞–∫—Ç–æ—Ä</strong> ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown</li>
        <li><strong>–°—Ç—Ä–∞–Ω–∏—Ü—ã</strong> ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ —Å–∞–π—Ç–∞</li>
        <li><strong>–ë–ª–æ–≥</strong> ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏ –±–ª–æ–≥–∞</li>
        <li><strong>Decap CMS</strong> ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è CMS (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Netlify)</li>
      </ul>
    </div>
    
    <div class="notice">
      <div class="notice-title">üìù –ö–∞–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç</div>
      <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä Markdown –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Decap CMS –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.</p>
    </div>
    
    <div class="grid-2">
      <div class="info-box">
        <h2>üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤</h2>
        <ul>
          <li><code>pages/</code> ‚Äî –†—É—Å—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
          <li><code>en/pages/</code> ‚Äî –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
          <li><code>ky/pages/</code> ‚Äî –ö—ã—Ä–≥—ã–∑—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
          <li><code>_posts/</code> ‚Äî –ó–∞–ø–∏—Å–∏ –±–ª–æ–≥–∞</li>
          <li><code>_data/</code> ‚Äî –î–∞–Ω–Ω—ã–µ (—Ñ–æ—Ç–æ, —Å–ª–æ–≤–∞—Ä—å)</li>
        </ul>
      </div>
      
      <div class="info-box">
        <h2>üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h2>
        <ul>
          <li><a href="https://github.com/KaraKalmyk/karakalmyk.github.io" target="_blank">GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</a></li>
          <li><a href="https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/pages" target="_blank">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ GitHub</a></li>
          <li><a href="https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/_posts" target="_blank">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–≥ –Ω–∞ GitHub</a></li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- Editor Tab -->
  <div class="admin-content" id="tab-editor">
    <div class="editor-container">
      <div class="editor-toolbar">
        <button class="toolbar-btn" onclick="insertMarkdown('**', '**')" title="–ñ–∏—Ä–Ω—ã–π">B</button>
        <button class="toolbar-btn" onclick="insertMarkdown('*', '*')" title="–ö—É—Ä—Å–∏–≤"><em>I</em></button>
        <button class="toolbar-btn" onclick="insertMarkdown('# ', '')" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1">H1</button>
        <button class="toolbar-btn" onclick="insertMarkdown('## ', '')" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2">H2</button>
        <button class="toolbar-btn" onclick="insertMarkdown('### ', '')" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 3">H3</button>
        <button class="toolbar-btn" onclick="insertMarkdown('- ', '')" title="–°–ø–∏—Å–æ–∫">‚Ä¢ List</button>
        <button class="toolbar-btn" onclick="insertMarkdown('1. ', '')" title="–ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫">1. List</button>
        <button class="toolbar-btn" onclick="insertMarkdown('[', '](url)')" title="–°—Å—ã–ª–∫–∞">üîó</button>
        <button class="toolbar-btn" onclick="insertMarkdown('![alt](', ')')" title="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üñº</button>
        <button class="toolbar-btn" onclick="insertMarkdown('> ', '')" title="–¶–∏—Ç–∞—Ç–∞">‚ùù</button>
        <button class="toolbar-btn" onclick="insertMarkdown('`', '`')" title="–ö–æ–¥">Code</button>
        <button class="toolbar-btn" onclick="insertMarkdown('```\n', '\n```')" title="–ë–ª–æ–∫ –∫–æ–¥–∞">```</button>
      </div>
      
      <div class="editor-fields">
        <div class="grid-2">
          <div class="field-group">
            <label for="page-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</label>
            <input type="text" id="page-title" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫" oninput="updatePreview()">
          </div>
          <div class="field-group">
            <label for="page-lang">–Ø–∑—ã–∫</label>
            <select id="page-lang">
              <option value="ru">–†—É—Å—Å–∫–∏–π</option>
              <option value="en">English</option>
              <option value="ky">–ö—ã—Ä–≥—ã–∑—á–∞</option>
            </select>
          </div>
        </div>
        <div class="field-group">
          <label for="page-permalink">Permalink (URL)</label>
          <input type="text" id="page-permalink" placeholder="/pages/–Ω–∞–∑–≤–∞–Ω–∏–µ-—Å—Ç—Ä–∞–Ω–∏—Ü—ã.html" oninput="updatePreview()">
        </div>
      </div>
      
      <div class="editor-main">
        <div class="editor-textarea-container">
          <div class="editor-label">Markdown</div>
          <textarea class="editor-textarea" id="markdown-editor" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown..." oninput="updatePreview()"></textarea>
        </div>
        <div class="preview-container">
          <div class="editor-label">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</div>
          <div class="preview-content" id="preview"></div>
        </div>
      </div>
      
      <div class="editor-actions">
        <button class="btn" onclick="copyFrontmatter()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å front matter</button>
        <button class="btn btn-secondary" onclick="downloadFile()">üíæ –°–∫–∞—á–∞—Ç—å .md —Ñ–∞–π–ª</button>
        <button class="btn btn-secondary" onclick="clearEditor()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
    </div>
  </div>
  
  <!-- Pages Tab -->
  <div class="admin-content" id="tab-pages">
    <div class="notice">
      <div class="notice-title">üìÅ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü</div>
      <p>–î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Decap CMS.</p>
    </div>
    
    <div class="file-list">
      <div class="file-list-header">
        <h3>–†—É—Å—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
        <a href="https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/pages" target="_blank" class="btn btn-secondary">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ GitHub</a>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/edit/main/pages/istoriya.md', '_blank')">
        <div class="file-info">
          <h4>–ò—Å—Ç–æ—Ä–∏—è</h4>
          <p>pages/istoriya.md</p>
        </div>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/edit/main/pages/proiskhozhdenie.md', '_blank')">
        <div class="file-info">
          <h4>–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ</h4>
          <p>pages/proiskhozhdenie.md</p>
        </div>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/edit/main/pages/yazyk.md', '_blank')">
        <div class="file-info">
          <h4>–Ø–∑—ã–∫</h4>
          <p>pages/yazyk.md</p>
        </div>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/edit/main/pages/fotoarhiv.md', '_blank')">
        <div class="file-info">
          <h4>–§–æ—Ç–æ–∞—Ä—Ö–∏–≤</h4>
          <p>pages/fotoarhiv.md</p>
        </div>
      </div>
    </div>
    
    <div class="file-list" style="margin-top: 2rem;">
      <div class="file-list-header">
        <h3>English pages</h3>
        <a href="https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/en/pages" target="_blank" class="btn btn-secondary">Open on GitHub</a>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/en/pages', '_blank')">
        <div class="file-info">
          <h4>All English pages</h4>
          <p>en/pages/</p>
        </div>
      </div>
    </div>
    
    <div class="file-list" style="margin-top: 2rem;">
      <div class="file-list-header">
        <h3>–ö—ã—Ä–≥—ã–∑—á–∞ –±–∞—Ä–∞–∫—Ç–∞—Ä</h3>
        <a href="https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/ky/pages" target="_blank" class="btn btn-secondary">GitHub'—Ç–∞ –∞—á—É—É</a>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/ky/pages', '_blank')">
        <div class="file-info">
          <h4>–ë–∞—Ä–¥—ã–∫ –∫—ã—Ä–≥—ã–∑—á–∞ –±–∞—Ä–∞–∫—Ç–∞—Ä</h4>
          <p>ky/pages/</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Posts Tab -->
  <div class="admin-content" id="tab-posts">
    <div class="notice">
      <div class="notice-title">üìù –ó–∞–ø–∏—Å–∏ –±–ª–æ–≥–∞</div>
      <p>–ó–∞–ø–∏—Å–∏ –±–ª–æ–≥–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ _posts. –ò–º—è —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ: YYYY-MM-DD-–Ω–∞–∑–≤–∞–Ω–∏–µ.md</p>
    </div>
    
    <div class="file-list">
      <div class="file-list-header">
        <h3>–ó–∞–ø–∏—Å–∏ –±–ª–æ–≥–∞</h3>
        <a href="https://github.com/KaraKalmyk/karakalmyk.github.io/tree/main/_posts" target="_blank" class="btn btn-secondary">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ GitHub</a>
      </div>
      <div class="file-item" onclick="window.open('https://github.com/KaraKalmyk/karakalmyk.github.io/new/main/_posts', '_blank')">
        <div class="file-info">
          <h4>+ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å</h4>
          <p>–û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä GitHub</p>
        </div>
      </div>
    </div>
    
    <div class="info-box" style="margin-top: 2rem;">
      <h2>–®–∞–±–ª–æ–Ω –∑–∞–ø–∏—Å–∏ –±–ª–æ–≥–∞</h2>
      <pre style="background: var(--bg-secondary); padding: 1rem; border-radius: 4px; overflow-x: auto; font-family: monospace; font-size: 0.85rem;">---
layout: moma
title: "–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏"
date: 2024-01-15
lang: ru
image: /photos/uploads/image.jpg
excerpt: "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏"
tags:
  - –∏—Å—Ç–æ—Ä–∏—è
  - –∫—É–ª—å—Ç—É—Ä–∞
---

–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown...</pre>
    </div>
  </div>
  
  <!-- Decap CMS Tab -->
  <div class="admin-content" id="tab-cms">
    <div class="info-box">
      <h2>Decap CMS</h2>
      <p>Decap CMS ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º. –î–ª—è –µ—ë —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Netlify –∏–ª–∏ OAuth.</p>
      <p><a href="https://decapcms.org/docs/" target="_blank">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Decap CMS ‚Üí</a></p>
    </div>
    
    <div class="notice">
      <div class="notice-title">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</div>
      <p>–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Decap CMS –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Netlify Identity –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ñ–∞–π–ª–µ <a href="https://github.com/KaraKalmyk/karakalmyk.github.io/blob/main/admin/README.md" target="_blank">admin/README.md</a>.</p>
    </div>
    
    <div style="text-align: center; padding: 2rem;">
      <a href="#" class="btn" id="launch-cms" onclick="launchCMS(); return false;">–ó–∞–ø—É—Å—Ç–∏—Ç—å Decap CMS</a>
    </div>
    
    <div id="cms-container" style="display: none;">
      <!-- Decap CMS will be loaded here -->
    </div>
  </div>
  
  <!-- Decap CMS Script -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <script>
    // Tab switching
    document.querySelectorAll('.admin-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
      });
    });
    
    // Simple Markdown to HTML converter
    function parseMarkdown(md) {
      if (!md) return '';
      
      let html = md
        // Escape HTML
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        // Code blocks (must be before other processing)
        .replace(/```(\w*)\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>')
        // Inline code
        .replace(/`([^`]+)`/g, '<code>$1</code>')
        // Headers
        .replace(/^### (.*$)/gm, '<h3>$1</h3>')
        .replace(/^## (.*$)/gm, '<h2>$1</h2>')
        .replace(/^# (.*$)/gm, '<h1>$1</h1>')
        // Bold and italic
        .replace(/\*\*\*([^*]+)\*\*\*/g, '<strong><em>$1</em></strong>')
        .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
        .replace(/\*([^*]+)\*/g, '<em>$1</em>')
        // Images
        .replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">')
        // Links
        .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>')
        // Blockquotes
        .replace(/^> (.*$)/gm, '<blockquote>$1</blockquote>')
        // Unordered lists - wrap consecutive list items
        .replace(/^- (.*$)/gm, '<ul-item>$1</ul-item>')
        .replace(/(<ul-item>.*?<\/ul-item>(\n|$))+/g, function(match) {
          return '<ul>' + match.replace(/<ul-item>/g, '<li>').replace(/<\/ul-item>/g, '</li>') + '</ul>';
        })
        // Ordered lists - wrap consecutive list items
        .replace(/^\d+\. (.*$)/gm, '<ol-item>$1</ol-item>')
        .replace(/(<ol-item>.*?<\/ol-item>(\n|$))+/g, function(match) {
          return '<ol>' + match.replace(/<ol-item>/g, '<li>').replace(/<\/ol-item>/g, '</li>') + '</ol>';
        })
        // Paragraphs
        .replace(/\n\n/g, '</p><p>')
        // Line breaks
        .replace(/\n/g, '<br>');
      
      // Wrap in paragraph if not starting with block element
      if (!html.startsWith('<h') && !html.startsWith('<ul') && !html.startsWith('<ol') && !html.startsWith('<pre') && !html.startsWith('<blockquote')) {
        html = '<p>' + html + '</p>';
      }
      
      return html;
    }
    
    // Update preview
    function updatePreview() {
      const markdown = document.getElementById('markdown-editor').value;
      const title = document.getElementById('page-title').value;
      const preview = document.getElementById('preview');
      
      let html = '';
      if (title) {
        html += '<h1>' + title + '</h1>';
      }
      html += parseMarkdown(markdown);
      
      preview.innerHTML = html;
    }
    
    // Insert markdown syntax
    function insertMarkdown(before, after) {
      const textarea = document.getElementById('markdown-editor');
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const text = textarea.value;
      const selected = text.substring(start, end);
      
      textarea.value = text.substring(0, start) + before + selected + after + text.substring(end);
      textarea.focus();
      textarea.setSelectionRange(start + before.length, start + before.length + selected.length);
      updatePreview();
    }
    
    // Copy with front matter
    function copyFrontmatter() {
      const title = document.getElementById('page-title').value || 'Untitled';
      const lang = document.getElementById('page-lang').value;
      const permalink = document.getElementById('page-permalink').value || '/pages/new-page.html';
      const content = document.getElementById('markdown-editor').value;
      
      const frontmatter = `---
layout: moma
title: "${title}"
lang: ${lang}
permalink: ${permalink}
---

${content}`;
      
      navigator.clipboard.writeText(frontmatter).then(() => {
        alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
      }).catch(err => {
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = frontmatter;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
      });
    }
    
    // Download as file
    function downloadFile() {
      const title = document.getElementById('page-title').value || 'untitled';
      const lang = document.getElementById('page-lang').value;
      const permalink = document.getElementById('page-permalink').value || '/pages/new-page.html';
      const content = document.getElementById('markdown-editor').value;
      
      const frontmatter = `---
layout: moma
title: "${title}"
lang: ${lang}
permalink: ${permalink}
---

${content}`;
      
      const filename = title.toLowerCase()
        .replace(/[^a-z–∞-—è—ë0-9]+/gi, '-')
        .replace(/^-|-$/g, '') + '.md';
      
      const blob = new Blob([frontmatter], { type: 'text/markdown' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      a.click();
      URL.revokeObjectURL(url);
    }
    
    // Clear editor
    function clearEditor() {
      if (confirm('–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä?')) {
        document.getElementById('page-title').value = '';
        document.getElementById('page-permalink').value = '';
        document.getElementById('markdown-editor').value = '';
        updatePreview();
      }
    }
    
    // Launch Decap CMS
    function launchCMS() {
      document.getElementById('launch-cms').style.display = 'none';
      document.getElementById('cms-container').style.display = 'block';
      
      // Note: Decap CMS is already loaded and will initialize automatically
      // if configured correctly in config.yml
      window.location.reload();
    }
    
    // Initialize preview on load
    updatePreview();
  </script>
</body>
</html>

